fragment EventFields on Event {
  id
  name
  slug
  description
  location
  eventStartTime
  eventEndTime
  registrationStartTime
  registrationEndTime
  isHighlighted
  isDraft
  headerImageFile
  signupOpen
  signupUpcoming
  signupClosed
  createdBy
  updatedBy
  createdAt
  updatedAt
}

fragment EventPage_OwnerOrganization on Organization {
  name
  id
  slug
}

fragment EventPage_EventCategory on EventCategory {
  id
  description
  name
  color
  ownerOrganization {
    ...EventPage_OwnerOrganization
  }
  updatedAt
}

fragment EventPage_Quota on Quota {
  id
  position
  title
  size
}

fragment EventPage_Registration on Registration {
  id
  fullName
  isQueued
  createdAt
}

fragment EventPage_Registrations on Registration {
  ...EventPage_Registration
  quota {
    ...EventPage_Quota
  }
}

fragment EventPage_Event on Event {
  ...EventFields
  category {
    ...EventPage_EventCategory
  }
  ownerOrganization {
    ...EventPage_OwnerOrganization
  }
  quotas(orderBy: POSITION_ASC) {
    nodes {
      ...EventPage_Quota
    }
  }
  registrations(orderBy: CREATED_AT_ASC) {
    nodes {
      ...EventPage_Registrations
    }
  }
}

fragment EventPage_Query on Query {
  ...SharedLayout_Query
  eventBySlug(slug: $slug) {
    ...EventPage_Event
  }
}

query EventPage($slug: String!) {
  ...EventPage_Query
}
